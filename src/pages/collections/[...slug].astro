---
import { getCollection, getEntries } from "astro:content";
import Layout from "@/layouts/layout.astro";
import Items from "@/components/items.astro";
import Navigation from "@/components/navigation.astro";

export async function getStaticPaths() {
  const entries = await getCollection("posts");
  return entries.map((entry) => {
    return {
      params: { slug: entry.id },
      props: entry,
    };
  });
}

const entry = Astro.props;
const items = await getEntries(entry.data.items);
---

<Layout
  title={`Collections - ${entry.data.title}`}
  description={entry.data.description}
  image={entry.data.image}
>
  <Navigation
    items={[
      {
        label: "collections",
      },
      {
        label: entry.id,
        pathname: `/collections/${entry.id}`,
      },
    ]}
  />
  <Items entries={items} />
</Layout>
